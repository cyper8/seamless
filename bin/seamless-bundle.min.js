var Seamless=function(a){"use strict";function b(){function b(a,b){var c=(65535&a)+(65535&b);return(a>>16)+(b>>16)+(c>>16)<<16|65535&c}function j(a,b){return a<<b|a>>>32-b}function k(a,c,d,e,f,g){return b(j(b(b(c,a),b(e,g)),f),d)}function n(a,b,c,d,e,f,g){return k(b&c|~b&d,a,b,e,f,g)}function i(a,b,c,d,e,f,g){return k(b&d|c&~d,a,b,e,f,g)}function q(a,b,c,d,e,f,g){return k(b^c^d,a,b,e,f,g)}function o(a,b,c,d,e,f,g){return k(c^(b|~d),a,b,e,f,g)}function u(g,e){g[e>>5]|=128<<e%32,g[(e+64>>>9<<4)+14]=e;var j,k,m,s,t,u=1732584193,w=-271733879,x=-1732584194,y=271733878;for(j=0;j<g.length;j+=16)k=u,m=w,s=x,t=y,u=n(u,w,x,y,g[j],7,-680876936),y=n(y,u,w,x,g[j+1],12,-389564586),x=n(x,y,u,w,g[j+2],17,606105819),w=n(w,x,y,u,g[j+3],22,-1044525330),u=n(u,w,x,y,g[j+4],7,-176418897),y=n(y,u,w,x,g[j+5],12,1200080426),x=n(x,y,u,w,g[j+6],17,-1473231341),w=n(w,x,y,u,g[j+7],22,-45705983),u=n(u,w,x,y,g[j+8],7,1770035416),y=n(y,u,w,x,g[j+9],12,-1958414417),x=n(x,y,u,w,g[j+10],17,-42063),w=n(w,x,y,u,g[j+11],22,-1990404162),u=n(u,w,x,y,g[j+12],7,1804603682),y=n(y,u,w,x,g[j+13],12,-40341101),x=n(x,y,u,w,g[j+14],17,-1502002290),w=n(w,x,y,u,g[j+15],22,1236535329),u=i(u,w,x,y,g[j+1],5,-165796510),y=i(y,u,w,x,g[j+6],9,-1069501632),x=i(x,y,u,w,g[j+11],14,643717713),w=i(w,x,y,u,g[j],20,-373897302),u=i(u,w,x,y,g[j+5],5,-701558691),y=i(y,u,w,x,g[j+10],9,38016083),x=i(x,y,u,w,g[j+15],14,-660478335),w=i(w,x,y,u,g[j+4],20,-405537848),u=i(u,w,x,y,g[j+9],5,568446438),y=i(y,u,w,x,g[j+14],9,-1019803690),x=i(x,y,u,w,g[j+3],14,-187363961),w=i(w,x,y,u,g[j+8],20,1163531501),u=i(u,w,x,y,g[j+13],5,-1444681467),y=i(y,u,w,x,g[j+2],9,-51403784),x=i(x,y,u,w,g[j+7],14,1735328473),w=i(w,x,y,u,g[j+12],20,-1926607734),u=q(u,w,x,y,g[j+5],4,-378558),y=q(y,u,w,x,g[j+8],11,-2022574463),x=q(x,y,u,w,g[j+11],16,1839030562),w=q(w,x,y,u,g[j+14],23,-35309556),u=q(u,w,x,y,g[j+1],4,-1530992060),y=q(y,u,w,x,g[j+4],11,1272893353),x=q(x,y,u,w,g[j+7],16,-155497632),w=q(w,x,y,u,g[j+10],23,-1094730640),u=q(u,w,x,y,g[j+13],4,681279174),y=q(y,u,w,x,g[j],11,-358537222),x=q(x,y,u,w,g[j+3],16,-722521979),w=q(w,x,y,u,g[j+6],23,76029189),u=q(u,w,x,y,g[j+9],4,-640364487),y=q(y,u,w,x,g[j+12],11,-421815835),x=q(x,y,u,w,g[j+15],16,530742520),w=q(w,x,y,u,g[j+2],23,-995338651),u=o(u,w,x,y,g[j],6,-198630844),y=o(y,u,w,x,g[j+7],10,1126891415),x=o(x,y,u,w,g[j+14],15,-1416354905),w=o(w,x,y,u,g[j+5],21,-57434055),u=o(u,w,x,y,g[j+12],6,1700485571),y=o(y,u,w,x,g[j+3],10,-1894986606),x=o(x,y,u,w,g[j+10],15,-1051523),w=o(w,x,y,u,g[j+1],21,-2054922799),u=o(u,w,x,y,g[j+8],6,1873313359),y=o(y,u,w,x,g[j+15],10,-30611744),x=o(x,y,u,w,g[j+6],15,-1560198380),w=o(w,x,y,u,g[j+13],21,1309151649),u=o(u,w,x,y,g[j+4],6,-145523070),y=o(y,u,w,x,g[j+11],10,-1120210379),x=o(x,y,u,w,g[j+2],15,718787259),w=o(w,x,y,u,g[j+9],21,-343485551),u=b(u,k),w=b(w,m),x=b(x,s),y=b(y,t);return[u,w,x,y]}function a(a){var c,b=String.fromCharCode,d="";for(c=0;c<32*a.length;c+=8)d+=b(255&a[c>>5]>>>c%32);return d}function f(a){var b,c=[];for(c[(a.length>>2)-1]=void 0,b=0;b<c.length;b+=1)c[b]=0;for(b=0;b<8*a.length;b+=8)c[b>>5]|=(255&a.charCodeAt(b/8))<<b%32;return c}function l(b){return a(u(f(b),8*b.length))}function c(b,c){var d,e,g=f(b),h=[],i=[];for(h[15]=i[15]=void 0,16<g.length&&(g=u(g,8*b.length)),d=0;16>d;d+=1)h[d]=909522486^g[d],i[d]=1549556828^g[d];return e=u(h.concat(f(c)),512+8*c.length),a(u(i.concat(e),640))}function h(a){var b,c,d="";for(c=0;c<a.length;c+=1)b=a.charCodeAt(c),d+="0123456789abcdef".charAt(15&b>>>4)+"0123456789abcdef".charAt(15&b);return d}function p(a){return unescape(encodeURIComponent(a))}function d(a){return l(p(a))}function r(a){return h(d(a))}function m(a,b){return c(p(a),p(b))}function g(a,b){return h(m(a,b))}return function(a,b,c){return b?c?m(b,a):g(b,a):c?d(a):r(a)}}function c(a){let b,c,d,e=a.split("/");if(-1===e[0].search(/:$/)?(b=window.location.protocol,""===e[0]&&e.shift()):b=e.shift(),""===e[0]&&(e.shift(),c=e.shift()),c&&""!==c||(c=window.location.host),d=encodeURI(`${b}//${c}/${e.join("/")}`),new URL(d))return d}/*  global localStorage, CustomEvent  */function d(a,b){return o(this,void 0,void 0,function*(){let c,d,e=0,f=0;return d=function g(){return new Promise(function(h){var i=new WebSocket(a);c=window.setTimeout(i.close,9e3),i.onclose=function(){if(clearTimeout(c),e++,5>e)d=g();else throw new Error(a+" does not answer")},i.onerror=function(a){console.error(a),f++,10<f&&(f=0,i.close())},i.onopen=function(){clearTimeout(c),e=0,f=0,h(i)},i.onmessage=function(a){let c;try{c=JSON.parse(a.data)}catch(a){throw a}c&&b(c)}})}(),yield d,function(a){d.then(function(b){b.send(a)})}})}function e(a,b){function c(a,b){let c;console.log(a);let d={method:b&&""!=b?"POST":"GET",headers:{Accept:"application/json"}};if("POST"===d.method&&(d.body=b,d.headers["Content-Type"]="application/json"),fetch&&AbortController){let b=new AbortController,e=b.signal;d.signal=e;let f=Promise.race([fetch(a,d).then(a=>{if(200===a.status)return a.json();throw new Error(a.status.toString())}),new Promise((a,c)=>setTimeout(()=>{b.abort(),c("Fetch timeout reached. Request aborted.")},3e4))]);c=f}else c=new Promise(function(c){var e=new XMLHttpRequest;const f=function(a){console.error(a),0<this.readyState&&4>this.readyState&&this.abort()}.bind(e);for(let b in e.timeout=3e4,e.addEventListener("readystatechange",function(){4==this.readyState&&200==this.status&&c(this.response)}),e.addEventListener("error",f),e.addEventListener("timeout",f),e.responseType="json",e.open(d.method,a,!0),d.headers)e.setRequestHeader(b,d.headers[b]);e.send(b||"")});return c}function d(){return c(a+"?nopoll=true","").then(a=>{console.log("initialized"),b(a)})}function e(e){return c(a,"string"==typeof e?e:JSON.stringify(e)).then(a=>b(a))}function f(){return console.log("polling"),c(a,"").then(function(a){b(a),g=window.setTimeout(f,1e3)})}let g,h=0;return new Promise((b,c)=>{a=0>a.search(/^https?:\/\//i)?a.replace(/^[^:]+:/i,"http:"):a,d().then(()=>{b(e)}).then(f).catch(function(a){console.error(a),5<h?(window.clearTimeout(g),h=0,console.error("Poller connection lost. Reconnection constantly failing. Try reloading page."),c(a)):(console.error("Reconnecting attempt "+h),g=window.setTimeout(f,1e3))})})}function f(a){if(!a)throw new Error("Wrong argument");var b=a.match(/^[a-z][a-z0-9-]*/i),c=a.match(/\.([a-z][a-z0-9_-]*)/ig)||[],d=a.match(/\#([a-z][a-z0-9_-]*)/i)||[],e=document.createElement(b[0]);return e.className=(0<c.length?c.join(" "):"").replace(/\./g,""),e.id=0<d.length?d[0].replace(/\#/,""):"",e}function g(a,b){var c;return function(){var d=this,e=arguments;c&&(clearTimeout(c),c=void 0),c=setTimeout(function(){clearTimeout(c),c=void 0,(a||function(){}).apply(d,e)},b||0)}}function h(a,b){for(var c,d=[],g=0;g<b.length;g++){c=b[g].querySelectorAll("#"+a),0==c.length&&(c=[]).push(b[g].appendChild(f("div#"+a)));for(var h=0;h<c.length;h++)d.push(c[h])}return d}function i(a){for(var b in a)if("_id"==b||"boolean"==typeof a[b])this.setAttribute(b,a[b]);else switch(typeof a[b]){case"number":case"string":h(b,[this]).forEach(function(c){c instanceof HTMLInputElement?(c.value=a[b],!c.onchange&&(c.onchange=g(function(){a[this.id]=this.value,this.dispatchEvent(new CustomEvent("seamlessdatachange",{bubbles:!0}))},1e3))):c.innerText=a[b]});break;case"object":h(b,[this]).forEach(function(c){i.apply(c,a[b])});}}function j(a){function b(a){g.clients.forEach(function(b){b.seamless?b.seamless(a):b.status=a})}function f(a){return Promise.all([h,g.buffer.write(a)]).then(([a,b])=>a(b))}var g=this;this.url=c(a),this.buffer=new n(this.url),this.clients=[];const h=function(a){return 0<=g.url.search(/^wss?:\/\//i)&&WebSocket?d(g.url,a):e(g.url.replace(/^ws/,"http"),a)}(function(a){g.buffer.write(a).then(a=>b(a))});this.then=function(a){return h.then(()=>a(g))},this.bindClients=function(a){return this.clients=a.map(a=>new p(a,f,g.buffer.data)),g},this.unbindClients=function(a){let b=a||g.clients;return b.forEach(a=>{let b=g.clients.indexOf(a);if(0<=b){let a=g.clients.splice(b,1)[0];a.deseamless&&a.deseamless()}}),g}}var k=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d["throw"](a))}catch(a){f(a)}}function i(a){a.done?e(a.value):new c(function(b){b(a.value)}).then(g,h)}i((d=d.apply(a,b||[])).next())})};const l=b(),m=function(){return function(a){try{var b=window[a];return b.setItem("__storage_test__","__storage_test__"),b.removeItem("__storage_test__"),!0}catch(a){return!1}}("localStorage")?window.localStorage:Object.defineProperties({},{setItem:{value:function(a,b){var c=new StorageEvent("storage",{key:a,oldValue:this[a],newValue:b,storageArea:this});return this[a]=b,(window||self).dispatchEvent(c),b;// incompatible with Storage interface - it should return void
}},getItem:{value:function(a){return this[a]||null}},removeItem:{value:function(a){let b=this[a];return delete this[a],window.dispatchEvent(new StorageEvent("storage",{key:a,oldValue:b,newValue:void 0,storageArea:this})),this}},key:{value:function(a){var b,d=0;for(b in this){if(d==a)return this[b];d++}}},clear:{value:function(){for(var a in this)this.removeItem(a);return this}},length:{get:function(){var a,b=0;for(a in this)b++;return b}}})}();class n{constructor(a){this.hash=l(a),this.__init()}__init(){return k(this,void 0,void 0,function*(){return yield this.datahash=Promise.resolve(m.getItem(this.hash)),yield this.__retrieve(),this})}read(){return k(this,void 0,void 0,function*(){return Promise.race([this.cache,this.__retrieve()])})}__retrieve(){return k(this,void 0,void 0,function*(){let a=yield this.datahash;return this.__cache(m.getItem(a)||"")})}__cache(a){let b;if(""!==a)try{b=JSON.parse(a)}catch(a){console.error(a)}return this.cache=b}write(a){return k(this,void 0,void 0,function*(){let b,c=yield this.datahash;try{b=JSON.stringify(a)}catch(a){console.error(a),b=""}let d=l(b);return d!==c&&(this.datahash=Promise.resolve(m.removeItem(c)).then(()=>(this.__cache(b),Promise.resolve(m.setItem(d,b)),Promise.resolve(m.setItem(this.hash,d)),d))),a})}get data(){return this.cache instanceof Object?this.cache:void 0}set data(a){this.write(a)}clear(){return k(this,void 0,void 0,function*(){let a=yield this.datahash;return m.removeItem(a),m.removeItem(this.hash),yield this.__init()})}}var o=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d["throw"](a))}catch(a){f(a)}}function i(a){a.done?e(a.value):new c(function(b){b(a.value)}).then(g,h)}i((d=d.apply(a,b||[])).next())})};class p{constructor(a,b,c){function d(a){b(c),a.stopPropagation()}let e={value:Function,enumerable:!0,configurable:!0},f={value:function(){void 0!==this.seamless&&(delete this.seamless,this.removeEventListener&&this.removeEventListener("seamlessdatachange",d)),this.status&&delete this.status}.bind(this),enumerable:!0,configurable:!0},g={get(){return c},set(a){b(a)},enumerable:!0,configurable:!0};a instanceof HTMLElement?(a.addEventListener("seamlessdatachange",d),e.value=a.dataset.sync&&"function"==typeof window[a.dataset.sync]?window[a.dataset.sync].bind(a):i.bind(a)):"function"==typeof a?e.value=a.bind(a):"object"==typeof a&&(e.value=!1);Object.defineProperties(this,{seamless:e,deseamless:f,status:g}),e.value&&e.value(c)}}const q=b(),r={connections:new Map,compile(a){let b=a.querySelectorAll("*[data-seamless]"),c=[];for(let d,e=0;e<b.length;e++)d=b[e],c.push(new Promise(a=>{r.connect(d.dataset.seamless).bindClients([d]).then(b=>{a(b)})}));return Promise.all(c)},getConnection(a){let b=c(a);return r.connections.get(q(b))},connect(a){let b=r.getConnection(a);return b||(b=new j(a),r.connections.set(q(b.url),b)),b},disconnect(a){let b=r.getConnection(a);return b.unbindClients(),r.connections.delete(q(b.url))}};return a.Seamless=r,a}({});
